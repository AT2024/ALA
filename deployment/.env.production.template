# ======================================================================
# ALA Medical Application - Production Environment
# ======================================================================
# Copy this file to .env and fill in your secrets
#
# IMPORTANT: Never commit .env file to git (it's in .gitignore)
# This template shows required variables with safe defaults where possible
#
# See docs/design-logs/2026-01-environment-alignment.md for parity details
# See deployment/.env.example for full variable documentation

# ======================================================================
# Database Configuration
# ======================================================================
POSTGRES_DB=ala_production
POSTGRES_USER=ala_user
POSTGRES_PASSWORD=CHANGE_ME_GENERATE_SECURE_PASSWORD

# Full database connection URL (must match above values)
DATABASE_URL=postgresql://ala_user:CHANGE_ME_GENERATE_SECURE_PASSWORD@db:5432/ala_production

# ======================================================================
# Backend API Configuration
# ======================================================================
NODE_ENV=production
PORT=5000

# JWT Secret (generate with: openssl rand -base64 32)
JWT_SECRET=CHANGE_ME_GENERATE_WITH_OPENSSL

# ======================================================================
# Frontend Configuration
# ======================================================================
# Production URL for API calls from frontend
# PARITY FIX (Gap #11): Use relative URL for image portability
# This allows the same built image to work in any environment
VITE_API_URL=/api

# Environment indicator (development/staging/production)
# Controls EnvironmentBanner visibility: only shows in staging
VITE_ENVIRONMENT=production

# Nginx configuration to use (should match your deployment)
NGINX_CONFIG=nginx.https.azure.conf

# ======================================================================
# Priority ERP Integration
# ======================================================================
PRIORITY_API_URL=https://your-priority-server.com
PRIORITY_API_USERNAME=CHANGE_ME
PRIORITY_API_PASSWORD=CHANGE_ME
PRIORITY_API_COMPANY=CHANGE_ME

# ======================================================================
# Azure Communication Services (Email)
# ======================================================================
# Connection string from Azure Portal > Communication Services > Keys
AZURE_COMMUNICATION_CONNECTION_STRING=CHANGE_ME_GET_FROM_AZURE_PORTAL

# Sender email address (from Azure Communication Services > Email > MailFrom addresses)
# Default: www.ala@alphatau.com (set in backend/src/config/appConfig.ts)
# Only override if you need a different sender address
AZURE_EMAIL_SENDER_ADDRESS=www.ala@alphatau.com

# Recipient email for treatment finalization PDFs
PDF_RECIPIENT_EMAIL=amitaik@alphatau.com

# ======================================================================
# Test User Configuration
# ======================================================================
# Email and UUID for the test user (used in development/testing)
TEST_USER_EMAIL=test@example.com
TEST_USER_UUID=47605b24-e71b-479b-93c5-8b7ce1c17098

# ======================================================================
# Optional: Advanced Configuration
# ======================================================================
# Uncomment and configure if needed

# Logging level (error, warn, info, debug)
# LOG_LEVEL=info

# Session secret
# SESSION_SECRET=CHANGE_ME_GENERATE_SECURE_PASSWORD

# CORS origins (comma-separated)
# CORS_ORIGINS=https://ala-app.israelcentral.cloudapp.azure.com

# ======================================================================
# URL and Port Configuration
# ======================================================================
# Domain for URL generation (used when VITE_API_URL is not set)
DOMAIN=ala-app.israelcentral.cloudapp.azure.com

# Port configuration (defaults shown)
# API_PORT=5000
# FRONTEND_PORT=3000

# Development frontend URL for CORS (defaults to http://localhost:3000)
# DEV_FRONTEND_URL=http://localhost:3000

# ======================================================================
# Timeout Configuration (milliseconds)
# ======================================================================
# Priority API request timeout (default: 30000)
# PRIORITY_API_TIMEOUT_MS=30000

# Priority API short timeout for quick operations (default: 10000)
# PRIORITY_API_SHORT_TIMEOUT_MS=10000

# Performance logging thresholds
# SLOW_REQUEST_THRESHOLD_MS=5000
# SLOW_RESPONSE_THRESHOLD_MS=3000

# Database health check cache validity (default: 300000 = 5 minutes)
# DB_HEALTH_CACHE_MS=300000

# Database health threshold for blocking operations (default: 5000)
# DB_HEALTH_THRESHOLD_MS=5000

# Database reconnection interval (default: 30000)
# DB_RECONNECT_INTERVAL_MS=30000

# ======================================================================
# Frontend Configuration (VITE_ prefix required for client-side access)
# ======================================================================
# API timeout for frontend requests (default: 30000)
# VITE_API_TIMEOUT_MS=30000

# API port for frontend URL generation (default: 5000)
# VITE_API_PORT=5000

# Domain for frontend production fallback URL generation
# VITE_DOMAIN=ala-app.israelcentral.cloudapp.azure.com
