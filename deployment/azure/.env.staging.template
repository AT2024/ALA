# =================================================================
# ALA Medical Application - Azure VM Staging Environment
# =================================================================
# Azure VM staging-specific environment variables
#
# ⚠️ IMPORTANT: This file contains sensitive credentials
# ⚠️ Never commit actual values to version control
# ⚠️ This is a template - create actual .env.staging with real values

# =================================================================
# Application Configuration - Azure Staging
# =================================================================
NODE_ENV=staging
LOG_LEVEL=info
PORT=5000

# =================================================================
# Database Configuration - Azure VM Staging
# =================================================================
POSTGRES_USER=ala_staging_user
POSTGRES_STAGING_PASSWORD=REPLACE_WITH_SECURE_STAGING_PASSWORD
POSTGRES_DB=ala_staging

# Full database URL for Sequelize
DATABASE_URL_STAGING=postgres://ala_staging_user:REPLACE_WITH_SECURE_STAGING_PASSWORD@db:5432/ala_staging

# =================================================================
# Priority API Configuration - Azure Staging
# =================================================================
# Use production Priority API with staging credentials
PRIORITY_API_URL=https://t.eu.priority-connect.online/odata/Priority/tabbtbc6.ini/test24
PRIORITY_API_USERNAME=REPLACE_WITH_STAGING_PRIORITY_USERNAME
PRIORITY_API_PASSWORD=REPLACE_WITH_STAGING_PRIORITY_PASSWORD
PRIORITY_API_TIMEOUT=30000
PRIORITY_MOCK=false

# Frontend Priority API URL
VITE_PRIORITY_API_URL=https://t.eu.priority-connect.online/odata/Priority/tabbtbc6.ini/test24

# =================================================================
# Authentication & Security - Azure Staging
# =================================================================
JWT_SECRET=REPLACE_WITH_STAGING_JWT_SECRET_MINIMUM_32_CHARACTERS
JWT_EXPIRES_IN=24h

# Azure-specific security settings
CORS_ORIGIN=http://20.217.84.100:3010
TRUSTED_PROXIES=20.217.84.100

# =================================================================
# SMS/Email Configuration - Staging
# =================================================================
SMS_API_KEY=REPLACE_WITH_STAGING_SMS_API_KEY
SMS_PROVIDER=twilio
EMAIL_API_KEY=REPLACE_WITH_STAGING_EMAIL_API_KEY
EMAIL_PROVIDER=sendgrid

# =================================================================
# Azure VM Specific Settings
# =================================================================
# Azure VM IP address
AZURE_VM_IP=20.217.84.100

# Staging ports for Azure VM
STAGING_FRONTEND_PORT=3010
STAGING_BACKEND_PORT=5010
STAGING_DB_PORT=5433

# =================================================================
# Feature Flags - Azure Staging
# =================================================================
ENABLE_TEST_DATA=true
ENABLE_DEBUG_LOGGING=false  # Disabled in Azure for performance
ENABLE_SWAGGER_UI=true
ENABLE_CORS_ALL_ORIGINS=false  # Restricted for security

# Bypass users for staging testing
BYPASS_PRIORITY_EMAILS=test@example.com,alexs@alphatau.com,staging@test.com

# =================================================================
# Frontend Configuration - Azure Staging
# =================================================================
VITE_API_URL=http://20.217.84.100:5010/api
VITE_ENVIRONMENT=staging
VITE_OFFLINE_STORAGE=true
VITE_ENABLE_DEVTOOLS=false  # Disabled in Azure staging

# =================================================================
# Monitoring & Logging - Azure Staging
# =================================================================
# Azure-optimized logging
LOG_FILE=/var/log/ala-staging.log
ENABLE_FILE_LOGGING=true
ENABLE_CONSOLE_LOGGING=true

# Health check configuration
HEALTH_CHECK_INTERVAL=30000
HEALTH_CHECK_TIMEOUT=10000

# =================================================================
# Performance Settings - Azure VM
# =================================================================
# Optimized for Azure VM resources
NODE_OPTIONS=--max-old-space-size=1024
UV_THREADPOOL_SIZE=4

# Database connection pool (staging)
DB_POOL_MIN=2
DB_POOL_MAX=10
DB_POOL_IDLE=10000

# =================================================================
# Security Configuration - Production-like
# =================================================================
# Production-like security for staging validation
SESSION_TIMEOUT=3600000  # 1 hour
RATE_LIMIT_WINDOW=900000  # 15 minutes
RATE_LIMIT_MAX_REQUESTS=500  # More restrictive than local staging
BCRYPT_ROUNDS=12

# =================================================================
# File Upload Configuration
# =================================================================
UPLOAD_MAX_SIZE=5242880  # 5MB limit for staging
UPLOAD_ALLOWED_TYPES=pdf,json,txt,csv
UPLOAD_DIR=/tmp/staging-uploads

# =================================================================
# External Services - Staging Endpoints
# =================================================================
# Use staging versions of external services when available
NOTIFICATION_SERVICE_URL=https://staging-notifications.alphatau.com
AUDIT_LOG_SERVICE_URL=https://staging-audit.alphatau.com

# =================================================================
# Backup & Recovery
# =================================================================
BACKUP_ENABLED=true
BACKUP_RETENTION_DAYS=7
BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM