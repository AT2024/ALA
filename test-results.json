{"numFailedTestSuites":0,"numFailedTests":0,"numPassedTestSuites":8,"numPassedTests":166,"numPendingTestSuites":0,"numPendingTests":0,"numRuntimeErrorTestSuites":0,"numTodoTests":0,"numTotalTestSuites":8,"numTotalTests":166,"openHandles":[],"snapshot":{"added":0,"didUpdate":false,"failure":false,"filesAdded":0,"filesRemoved":0,"filesRemovedList":[],"filesUnmatched":0,"filesUpdated":0,"matched":0,"total":0,"unchecked":0,"uncheckedKeysByFile":[],"unmatched":0,"updated":0},"startTime":1771345632793,"success":true,"testResults":[{"assertionResults":[{"ancestorTitles":["Treatment Workflow","Insertion Procedure","Create treatment"],"duration":8,"failureDetails":[],"failureMessages":[],"fullName":"Treatment Workflow Insertion Procedure Create treatment should create a new insertion treatment with required fields","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should create a new insertion treatment with required fields"},{"ancestorTitles":["Treatment Workflow","Insertion Procedure","Create treatment"],"duration":33,"failureDetails":[],"failureMessages":[],"fullName":"Treatment Workflow Insertion Procedure Create treatment should require patient identification before treatment","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should require patient identification before treatment"},{"ancestorTitles":["Treatment Workflow","Insertion Procedure","Scan applicators"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Treatment Workflow Insertion Procedure Scan applicators should add scanned applicator to treatment","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should add scanned applicator to treatment"},{"ancestorTitles":["Treatment Workflow","Insertion Procedure","Scan applicators"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Treatment Workflow Insertion Procedure Scan applicators should validate applicator exists in Priority system","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should validate applicator exists in Priority system"},{"ancestorTitles":["Treatment Workflow","Insertion Procedure","Record usage"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Treatment Workflow Insertion Procedure Record usage should record full use with all seeds inserted","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should record full use with all seeds inserted"},{"ancestorTitles":["Treatment Workflow","Insertion Procedure","Record usage"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Treatment Workflow Insertion Procedure Record usage should record partial use with faulty applicator","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should record partial use with faulty applicator"},{"ancestorTitles":["Treatment Workflow","Insertion Procedure","Record usage"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Treatment Workflow Insertion Procedure Record usage should record no-use and return applicator to pool","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should record no-use and return applicator to pool"},{"ancestorTitles":["Treatment Workflow","Insertion Procedure","Complete treatment"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Treatment Workflow Insertion Procedure Complete treatment should mark treatment as complete when all applicators processed","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should mark treatment as complete when all applicators processed"},{"ancestorTitles":["Treatment Workflow","Insertion Procedure","Complete treatment"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Treatment Workflow Insertion Procedure Complete treatment should prevent completion with unprocessed applicators","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should prevent completion with unprocessed applicators"},{"ancestorTitles":["Treatment Workflow","Insertion Procedure","Generate documentation"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"Treatment Workflow Insertion Procedure Generate documentation should generate treatment summary with all applicator data","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should generate treatment summary with all applicator data"},{"ancestorTitles":["Treatment Workflow","Removal Procedure","Load insertion data"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Treatment Workflow Removal Procedure Load insertion data should load previous insertion data for removal","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should load previous insertion data for removal"},{"ancestorTitles":["Treatment Workflow","Removal Procedure","Load insertion data"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Treatment Workflow Removal Procedure Load insertion data should validate treatment is ready for removal","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should validate treatment is ready for removal"},{"ancestorTitles":["Treatment Workflow","Removal Procedure","Record removals"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Treatment Workflow Removal Procedure Record removals should record applicator removal with seed count","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should record applicator removal with seed count"},{"ancestorTitles":["Treatment Workflow","Removal Procedure","Record removals"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Treatment Workflow Removal Procedure Record removals should track removal of individual seeds","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should track removal of individual seeds"},{"ancestorTitles":["Treatment Workflow","Removal Procedure","Track discrepancies"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Treatment Workflow Removal Procedure Track discrepancies should record discrepancy for each applicator","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should record discrepancy for each applicator"},{"ancestorTitles":["Treatment Workflow","Removal Procedure","Track discrepancies"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Treatment Workflow Removal Procedure Track discrepancies should require reason for any discrepancy","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should require reason for any discrepancy"},{"ancestorTitles":["Treatment Workflow","Removal Procedure","Complete removal"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Treatment Workflow Removal Procedure Complete removal should complete removal when all applicators processed","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should complete removal when all applicators processed"},{"ancestorTitles":["Treatment Workflow","Removal Procedure","Complete removal"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Treatment Workflow Removal Procedure Complete removal should generate removal report with discrepancy summary","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should generate removal report with discrepancy summary"},{"ancestorTitles":["Treatment Workflow","Treatment Validation"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"Treatment Workflow Treatment Validation should validate treatment type is valid","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should validate treatment type is valid"},{"ancestorTitles":["Treatment Workflow","Treatment Validation"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Treatment Workflow Treatment Validation should validate date is not in the future for completion","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should validate date is not in the future for completion"}],"endTime":1771345634541,"message":"","name":"/home/runner/work/ALA/ALA/backend/tests/medical/treatment-workflow.test.ts","startTime":1771345633320,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["SignatureVerification Model","generateCode"],"duration":7,"failureDetails":[],"failureMessages":[],"fullName":"SignatureVerification Model generateCode should generate a 6-digit numeric code","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should generate a 6-digit numeric code"},{"ancestorTitles":["SignatureVerification Model","generateCode"],"duration":3,"failureDetails":[],"failureMessages":[],"fullName":"SignatureVerification Model generateCode should hash the code with bcrypt (salt rounds 10)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should hash the code with bcrypt (salt rounds 10)"},{"ancestorTitles":["SignatureVerification Model","generateCode"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"SignatureVerification Model generateCode should set verificationCode to hashed value","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should set verificationCode to hashed value"},{"ancestorTitles":["SignatureVerification Model","generateCode"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"SignatureVerification Model generateCode should set 1-hour expiration","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should set 1-hour expiration"},{"ancestorTitles":["SignatureVerification Model","generateCode"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"SignatureVerification Model generateCode should reset failedAttempts to 0","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should reset failedAttempts to 0"},{"ancestorTitles":["SignatureVerification Model","generateCode"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"SignatureVerification Model generateCode should set status to pending","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should set status to pending"},{"ancestorTitles":["SignatureVerification Model","generateCode"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"SignatureVerification Model generateCode should call save() to persist changes","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should call save() to persist changes"},{"ancestorTitles":["SignatureVerification Model","verifyCode"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"SignatureVerification Model verifyCode should return true for valid code","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should return true for valid code"},{"ancestorTitles":["SignatureVerification Model","verifyCode"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"SignatureVerification Model verifyCode should set status to verified on success","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should set status to verified on success"},{"ancestorTitles":["SignatureVerification Model","verifyCode"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"SignatureVerification Model verifyCode should return false for invalid code","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return false for invalid code"},{"ancestorTitles":["SignatureVerification Model","verifyCode"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"SignatureVerification Model verifyCode should increment failedAttempts on wrong code","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should increment failedAttempts on wrong code"},{"ancestorTitles":["SignatureVerification Model","verifyCode"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"SignatureVerification Model verifyCode should increment failedAttempts for each wrong attempt","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should increment failedAttempts for each wrong attempt"},{"ancestorTitles":["SignatureVerification Model","verifyCode"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"SignatureVerification Model verifyCode should set status to failed after 3 wrong attempts","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should set status to failed after 3 wrong attempts"},{"ancestorTitles":["SignatureVerification Model","verifyCode"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"SignatureVerification Model verifyCode should return false if already verified","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should return false if already verified"},{"ancestorTitles":["SignatureVerification Model","verifyCode"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"SignatureVerification Model verifyCode should return false if already failed","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should return false if already failed"},{"ancestorTitles":["SignatureVerification Model","verifyCode"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"SignatureVerification Model verifyCode should set status to expired if past expiration","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should set status to expired if past expiration"},{"ancestorTitles":["SignatureVerification Model","verifyCode"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"SignatureVerification Model verifyCode should call save() after verification","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should call save() after verification"},{"ancestorTitles":["SignatureVerification Model","verifyCode"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"SignatureVerification Model verifyCode should call save() after failed attempt","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should call save() after failed attempt"},{"ancestorTitles":["SignatureVerification Model","getRemainingAttempts"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"SignatureVerification Model getRemainingAttempts should return 3 when failedAttempts is 0","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 3 when failedAttempts is 0"},{"ancestorTitles":["SignatureVerification Model","getRemainingAttempts"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"SignatureVerification Model getRemainingAttempts should return 2 when failedAttempts is 1","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 2 when failedAttempts is 1"},{"ancestorTitles":["SignatureVerification Model","getRemainingAttempts"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"SignatureVerification Model getRemainingAttempts should return 1 when failedAttempts is 2","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 1 when failedAttempts is 2"},{"ancestorTitles":["SignatureVerification Model","getRemainingAttempts"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"SignatureVerification Model getRemainingAttempts should return 0 when failedAttempts is 3","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return 0 when failedAttempts is 3"},{"ancestorTitles":["SignatureVerification Model","getRemainingAttempts"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"SignatureVerification Model getRemainingAttempts should never return negative even with more than 3 attempts","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should never return negative even with more than 3 attempts"},{"ancestorTitles":["SignatureVerification Model","isStillValid"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"SignatureVerification Model isStillValid should return true when status is pending and not expired","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return true when status is pending and not expired"},{"ancestorTitles":["SignatureVerification Model","isStillValid"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"SignatureVerification Model isStillValid should return false when status is verified","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return false when status is verified"},{"ancestorTitles":["SignatureVerification Model","isStillValid"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"SignatureVerification Model isStillValid should return false when status is failed","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return false when status is failed"},{"ancestorTitles":["SignatureVerification Model","isStillValid"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"SignatureVerification Model isStillValid should return false when status is expired","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return false when status is expired"},{"ancestorTitles":["SignatureVerification Model","isStillValid"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"SignatureVerification Model isStillValid should return false when expired (even if status is pending)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return false when expired (even if status is pending)"},{"ancestorTitles":["SignatureVerification Model","isStillValid"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"SignatureVerification Model isStillValid should return false when expired at exactly current time","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return false when expired at exactly current time"},{"ancestorTitles":["SignatureVerification Model","Full Workflow Integration"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"SignatureVerification Model Full Workflow Integration should complete successful verification workflow","invocations":1,"location":null,"numPassingAsserts":7,"retryReasons":[],"status":"passed","title":"should complete successful verification workflow"},{"ancestorTitles":["SignatureVerification Model","Full Workflow Integration"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"SignatureVerification Model Full Workflow Integration should handle failed attempts workflow correctly","invocations":1,"location":null,"numPassingAsserts":9,"retryReasons":[],"status":"passed","title":"should handle failed attempts workflow correctly"},{"ancestorTitles":["SignatureVerification Model","Full Workflow Integration"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"SignatureVerification Model Full Workflow Integration should handle expiration correctly","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should handle expiration correctly"},{"ancestorTitles":["SignatureVerification Model","Full Workflow Integration"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"SignatureVerification Model Full Workflow Integration should allow regeneration after expiration","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should allow regeneration after expiration"},{"ancestorTitles":["SignatureVerification Model","Edge Cases"],"duration":40,"failureDetails":[],"failureMessages":[],"fullName":"SignatureVerification Model Edge Cases should handle bcrypt hash error","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle bcrypt hash error"},{"ancestorTitles":["SignatureVerification Model","Edge Cases"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"SignatureVerification Model Edge Cases should handle bcrypt compare error","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle bcrypt compare error"},{"ancestorTitles":["SignatureVerification Model","Edge Cases"],"duration":14,"failureDetails":[],"failureMessages":[],"fullName":"SignatureVerification Model Edge Cases should handle verification at exact expiration boundary","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should handle verification at exact expiration boundary"},{"ancestorTitles":["SignatureVerification Model","Signer Information"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"SignatureVerification Model Signer Information should store signer name and position","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should store signer name and position"},{"ancestorTitles":["SignatureVerification Model","Signer Information"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"SignatureVerification Model Signer Information should allow null signer information","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should allow null signer information"}],"endTime":1771345634697,"message":"","name":"/home/runner/work/ALA/ALA/backend/tests/unit/models/SignatureVerification.test.ts","startTime":1771345633426,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Applicator 8-State Validation","State Transitions","SCANNED -> INSERTED -> COMPLETED flow"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Applicator 8-State Validation State Transitions SCANNED -> INSERTED -> COMPLETED flow should allow valid state transition from scanned to inserted","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should allow valid state transition from scanned to inserted"},{"ancestorTitles":["Applicator 8-State Validation","State Transitions","SCANNED -> INSERTED -> COMPLETED flow"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Applicator 8-State Validation State Transitions SCANNED -> INSERTED -> COMPLETED flow should allow transition from inserted to completed","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should allow transition from inserted to completed"},{"ancestorTitles":["Applicator 8-State Validation","State Transitions","SCANNED -> NO_USE -> RECOVERED flow"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Applicator 8-State Validation State Transitions SCANNED -> NO_USE -> RECOVERED flow should allow marking applicator as no-use","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should allow marking applicator as no-use"},{"ancestorTitles":["Applicator 8-State Validation","State Transitions","SCANNED -> NO_USE -> RECOVERED flow"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Applicator 8-State Validation State Transitions SCANNED -> NO_USE -> RECOVERED flow should allow recovery of no-use applicator for reuse","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should allow recovery of no-use applicator for reuse"},{"ancestorTitles":["Applicator 8-State Validation","State Transitions","SCANNED -> FAULTY scenarios"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Applicator 8-State Validation State Transitions SCANNED -> FAULTY scenarios should handle faulty applicator with partial seed insertion","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should handle faulty applicator with partial seed insertion"},{"ancestorTitles":["Applicator 8-State Validation","State Transitions","SCANNED -> FAULTY scenarios"],"duration":49,"failureDetails":[],"failureMessages":[],"fullName":"Applicator 8-State Validation State Transitions SCANNED -> FAULTY scenarios should require faulty reason when marking as faulty","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should require faulty reason when marking as faulty"},{"ancestorTitles":["Applicator 8-State Validation","State Transitions","Invalid state transition prevention"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"Applicator 8-State Validation State Transitions Invalid state transition prevention should prevent transition from COMPLETED back to SCANNED","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should prevent transition from COMPLETED back to SCANNED"},{"ancestorTitles":["Applicator 8-State Validation","State Transitions","Invalid state transition prevention"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Applicator 8-State Validation State Transitions Invalid state transition prevention should prevent skipping INSERTED state","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should prevent skipping INSERTED state"},{"ancestorTitles":["Applicator 8-State Validation","Medical Safety Checks","Wrong patient detection"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Applicator 8-State Validation Medical Safety Checks Wrong patient detection should detect applicator intended for different patient","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should detect applicator intended for different patient"},{"ancestorTitles":["Applicator 8-State Validation","Medical Safety Checks","Wrong patient detection"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Applicator 8-State Validation Medical Safety Checks Wrong patient detection should allow applicator matching current patient","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should allow applicator matching current patient"},{"ancestorTitles":["Applicator 8-State Validation","Medical Safety Checks","Previously used applicator detection"],"duration":9,"failureDetails":[],"failureMessages":[],"fullName":"Applicator 8-State Validation Medical Safety Checks Previously used applicator detection should detect already scanned applicator in current treatment","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should detect already scanned applicator in current treatment"},{"ancestorTitles":["Applicator 8-State Validation","Medical Safety Checks","Previously used applicator detection"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Applicator 8-State Validation Medical Safety Checks Previously used applicator detection should detect applicator used in previous treatment","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should detect applicator used in previous treatment"},{"ancestorTitles":["Applicator 8-State Validation","Medical Safety Checks","Seed count validation"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Applicator 8-State Validation Medical Safety Checks Seed count validation should validate inserted seeds does not exceed applicator capacity","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should validate inserted seeds does not exceed applicator capacity"},{"ancestorTitles":["Applicator 8-State Validation","Medical Safety Checks","Seed count validation"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Applicator 8-State Validation Medical Safety Checks Seed count validation should track total seeds inserted across all applicators","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should track total seeds inserted across all applicators"},{"ancestorTitles":["Applicator 8-State Validation","Medical Safety Checks","Expiry date validation"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Applicator 8-State Validation Medical Safety Checks Expiry date validation should reject expired applicators","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should reject expired applicators"},{"ancestorTitles":["Applicator 8-State Validation","Medical Safety Checks","Expiry date validation"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Applicator 8-State Validation Medical Safety Checks Expiry date validation should warn for applicators expiring soon (30 days)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should warn for applicators expiring soon (30 days)"}],"endTime":1771345635020,"message":"","name":"/home/runner/work/ALA/ALA/backend/tests/medical/applicator-validation.test.ts","startTime":1771345634564,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Seed Tracking Accuracy","Insertion Tracking","Total seeds calculation"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Seed Tracking Accuracy Insertion Tracking Total seeds calculation should calculate total seeds from full use applicators","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should calculate total seeds from full use applicators"},{"ancestorTitles":["Seed Tracking Accuracy","Insertion Tracking","Total seeds calculation"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Seed Tracking Accuracy Insertion Tracking Total seeds calculation should handle mixed usage types correctly","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle mixed usage types correctly"},{"ancestorTitles":["Seed Tracking Accuracy","Insertion Tracking","Total seeds calculation"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Seed Tracking Accuracy Insertion Tracking Total seeds calculation should calculate total available seeds from all scanned applicators","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should calculate total available seeds from all scanned applicators"},{"ancestorTitles":["Seed Tracking Accuracy","Insertion Tracking","Partial use calculations"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Seed Tracking Accuracy Insertion Tracking Partial use calculations should track remaining seeds after partial insertion","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should track remaining seeds after partial insertion"},{"ancestorTitles":["Seed Tracking Accuracy","Insertion Tracking","Partial use calculations"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Seed Tracking Accuracy Insertion Tracking Partial use calculations should calculate insertion efficiency percentage","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should calculate insertion efficiency percentage"},{"ancestorTitles":["Seed Tracking Accuracy","Insertion Tracking","Faulty applicator seed handling"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Seed Tracking Accuracy Insertion Tracking Faulty applicator seed handling should track seeds lost due to faulty applicators","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should track seeds lost due to faulty applicators"},{"ancestorTitles":["Seed Tracking Accuracy","Insertion Tracking","Faulty applicator seed handling"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Seed Tracking Accuracy Insertion Tracking Faulty applicator seed handling should report faulty applicator statistics","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should report faulty applicator statistics"},{"ancestorTitles":["Seed Tracking Accuracy","Removal Tracking","Removal count accuracy"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Seed Tracking Accuracy Removal Tracking Removal count accuracy should track seeds removed per applicator","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should track seeds removed per applicator"},{"ancestorTitles":["Seed Tracking Accuracy","Removal Tracking","Removal count accuracy"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Seed Tracking Accuracy Removal Tracking Removal count accuracy should calculate removal progress percentage","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should calculate removal progress percentage"},{"ancestorTitles":["Seed Tracking Accuracy","Removal Tracking","Discrepancy detection"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Seed Tracking Accuracy Removal Tracking Discrepancy detection should detect seed count discrepancy during removal","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should detect seed count discrepancy during removal"},{"ancestorTitles":["Seed Tracking Accuracy","Removal Tracking","Discrepancy detection"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Seed Tracking Accuracy Removal Tracking Discrepancy detection should track discrepancy reasons per applicator","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should track discrepancy reasons per applicator"},{"ancestorTitles":["Seed Tracking Accuracy","Removal Tracking","Discrepancy detection"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Seed Tracking Accuracy Removal Tracking Discrepancy detection should calculate total discrepancy across treatment","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should calculate total discrepancy across treatment"},{"ancestorTitles":["Seed Tracking Accuracy","Removal Tracking","Individual seed removal tracking"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Seed Tracking Accuracy Removal Tracking Individual seed removal tracking should track seeds removed individually (not via applicator)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should track seeds removed individually (not via applicator)"},{"ancestorTitles":["Seed Tracking Accuracy","Removal Tracking","Individual seed removal tracking"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Seed Tracking Accuracy Removal Tracking Individual seed removal tracking should prevent individual seed count exceeding remaining seeds","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should prevent individual seed count exceeding remaining seeds"},{"ancestorTitles":["Seed Tracking Accuracy","Audit Trail"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Seed Tracking Accuracy Audit Trail should record timestamp for each seed tracking action","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should record timestamp for each seed tracking action"},{"ancestorTitles":["Seed Tracking Accuracy","Audit Trail"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Seed Tracking Accuracy Audit Trail should maintain chronological order of seed tracking events","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should maintain chronological order of seed tracking events"}],"endTime":1771345635083,"message":"","name":"/home/runner/work/ALA/ALA/backend/tests/medical/seed-tracking.test.ts","startTime":1771345634705,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Priority Service","debugPriorityConnection"],"duration":13,"failureDetails":[],"failureMessages":[],"fullName":"Priority Service debugPriorityConnection should successfully test Priority API connection","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"should successfully test Priority API connection"},{"ancestorTitles":["Priority Service","debugPriorityConnection"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Priority Service debugPriorityConnection should handle Priority API connection failure","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should handle Priority API connection failure"},{"ancestorTitles":["Priority Service","debugPriorityConnection"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Priority Service debugPriorityConnection should handle network timeout","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should handle network timeout"},{"ancestorTitles":["Priority Service","getUserSiteAccess"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Priority Service getUserSiteAccess should handle test@example.com with test data","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"should handle test@example.com with test data"},{"ancestorTitles":["Priority Service","getUserSiteAccess"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"Priority Service getUserSiteAccess should handle regular user with Priority API","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should handle regular user with Priority API"},{"ancestorTitles":["Priority Service","getUserSiteAccess"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Priority Service getUserSiteAccess should handle Alpha Tau employee with position code 99","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should handle Alpha Tau employee with position code 99"},{"ancestorTitles":["Priority Service","getUserSiteAccess"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Priority Service getUserSiteAccess should handle user not found in Priority","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle user not found in Priority"},{"ancestorTitles":["Priority Service","getUserSiteAccess"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Priority Service getUserSiteAccess should handle bypass user when Priority API fails","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should handle bypass user when Priority API fails"},{"ancestorTitles":["Priority Service","getUserSiteAccess"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Priority Service getUserSiteAccess should handle phone number authentication","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should handle phone number authentication"},{"ancestorTitles":["Priority Service","getUserFromPhonebook"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Priority Service getUserFromPhonebook should find user by email","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should find user by email"},{"ancestorTitles":["Priority Service","getUserFromPhonebook"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Priority Service getUserFromPhonebook should find user by phone number","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should find user by phone number"},{"ancestorTitles":["Priority Service","getUserFromPhonebook"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Priority Service getUserFromPhonebook should perform case-insensitive email search","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should perform case-insensitive email search"},{"ancestorTitles":["Priority Service","getUserFromPhonebook"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"Priority Service getUserFromPhonebook should handle Priority API error","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should handle Priority API error"},{"ancestorTitles":["Priority Service","getAllSites"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Priority Service getAllSites should retrieve all sites from CUSTOMERS endpoint","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should retrieve all sites from CUSTOMERS endpoint"},{"ancestorTitles":["Priority Service","getAllSites"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Priority Service getAllSites should handle empty customers response","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle empty customers response"},{"ancestorTitles":["Priority Service","getAllSites"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Priority Service getAllSites should handle API error","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle API error"},{"ancestorTitles":["Priority Service","getOrdersForSiteWithFilter"],"duration":5,"failureDetails":[],"failureMessages":[],"fullName":"Priority Service getOrdersForSiteWithFilter should get orders for site with date filter","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should get orders for site with date filter"},{"ancestorTitles":["Priority Service","getOrdersForSiteWithFilter"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Priority Service getOrdersForSiteWithFilter should use test data for test@example.com","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should use test data for test@example.com"},{"ancestorTitles":["Priority Service","getOrdersForSiteWithFilter"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Priority Service getOrdersForSiteWithFilter should handle API error and fallback to test data for test users","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle API error and fallback to test data for test users"},{"ancestorTitles":["Priority Service","getOrdersForSiteWithFilter"],"duration":31,"failureDetails":[],"failureMessages":[],"fullName":"Priority Service getOrdersForSiteWithFilter should throw error for real users when API fails","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should throw error for real users when API fails"},{"ancestorTitles":["Priority Service","checkRemovalStatus"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"Priority Service checkRemovalStatus should check removal status from Priority API","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should check removal status from Priority API"},{"ancestorTitles":["Priority Service","checkRemovalStatus"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Priority Service checkRemovalStatus should handle order not found","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should handle order not found"},{"ancestorTitles":["Priority Service","checkRemovalStatus"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Priority Service checkRemovalStatus should handle API error","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should handle API error"},{"ancestorTitles":["Priority Service","updateApplicatorInPriority"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Priority Service updateApplicatorInPriority should update applicator in Priority system","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should update applicator in Priority system"},{"ancestorTitles":["Priority Service","updateApplicatorInPriority"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"Priority Service updateApplicatorInPriority should handle Priority saving disabled","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should handle Priority saving disabled"},{"ancestorTitles":["Priority Service","updateApplicatorInPriority"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Priority Service updateApplicatorInPriority should handle API error in development mode","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should handle API error in development mode"},{"ancestorTitles":["Priority Service","updateApplicatorInPriority"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Priority Service updateApplicatorInPriority should continue with local save when API fails in production","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should continue with local save when API fails in production"},{"ancestorTitles":["Priority Service","Date filtering and OData queries"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Priority Service Date filtering and OData queries should construct proper OData date filter","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should construct proper OData date filter"},{"ancestorTitles":["Priority Service","Date filtering and OData queries"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"Priority Service Date filtering and OData queries should handle invalid date format gracefully","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle invalid date format gracefully"},{"ancestorTitles":["Priority Service","Error handling and fallbacks"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Priority Service Error handling and fallbacks should handle network timeouts gracefully","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should handle network timeouts gracefully"},{"ancestorTitles":["Priority Service","Error handling and fallbacks"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Priority Service Error handling and fallbacks should handle Priority API rate limiting","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should handle Priority API rate limiting"},{"ancestorTitles":["Priority Service","Error handling and fallbacks"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Priority Service Error handling and fallbacks should handle malformed Priority API responses","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle malformed Priority API responses"}],"endTime":1771345635278,"message":"","name":"/home/runner/work/ALA/ALA/backend/tests/unit/services/priorityService.test.ts","startTime":1771345633403,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["AuthAuditService","maskIdentifier"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"AuthAuditService maskIdentifier should mask email addresses correctly","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should mask email addresses correctly"},{"ancestorTitles":["AuthAuditService","maskIdentifier"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"AuthAuditService maskIdentifier should mask phone numbers correctly","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should mask phone numbers correctly"},{"ancestorTitles":["AuthAuditService","maskIdentifier"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"AuthAuditService maskIdentifier should mask short identifiers","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should mask short identifiers"},{"ancestorTitles":["AuthAuditService","maskIdentifier"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"AuthAuditService maskIdentifier should return null for null/undefined input","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should return null for null/undefined input"},{"ancestorTitles":["AuthAuditService","logLoginSuccess"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"AuthAuditService logLoginSuccess should create audit log entry with correct event type","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should create audit log entry with correct event type"},{"ancestorTitles":["AuthAuditService","logLoginSuccess"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"AuthAuditService logLoginSuccess should handle missing optional parameters","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle missing optional parameters"},{"ancestorTitles":["AuthAuditService","logLoginSuccess"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"AuthAuditService logLoginSuccess should not throw on database error","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should not throw on database error"},{"ancestorTitles":["AuthAuditService","logLoginFailure"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"AuthAuditService logLoginFailure should create audit log entry with masked identifier","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should create audit log entry with masked identifier"},{"ancestorTitles":["AuthAuditService","logLoginFailure"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"AuthAuditService logLoginFailure should not throw on database error","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should not throw on database error"},{"ancestorTitles":["AuthAuditService","logLogout"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"AuthAuditService logLogout should create audit log entry with correct event type","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should create audit log entry with correct event type"},{"ancestorTitles":["AuthAuditService","logLogout"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"AuthAuditService logLogout should not throw on database error","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should not throw on database error"},{"ancestorTitles":["AuthAuditService","logSessionTimeout"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"AuthAuditService logSessionTimeout should create audit log entry with correct event type","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should create audit log entry with correct event type"},{"ancestorTitles":["AuthAuditService","logSessionTimeout"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"AuthAuditService logSessionTimeout should include requestId when provided","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should include requestId when provided"},{"ancestorTitles":["AuthAuditService","logSessionTimeout"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"AuthAuditService logSessionTimeout should not throw on database error","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should not throw on database error"},{"ancestorTitles":["AuthAuditService","logOtpRequest"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"AuthAuditService logOtpRequest should create audit log entry with masked identifier","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should create audit log entry with masked identifier"},{"ancestorTitles":["AuthAuditService","logOtpRequest"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"AuthAuditService logOtpRequest should not throw on database error","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should not throw on database error"}],"endTime":1771345635451,"message":"","name":"/home/runner/work/ALA/ALA/backend/tests/unit/services/authAuditService.test.ts","startTime":1771345635087,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["EmailService","Configuration"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"EmailService Configuration should have email configuration functions available","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should have email configuration functions available"},{"ancestorTitles":["EmailService","Configuration"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"EmailService Configuration should have clinic recipient email configured from env var","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should have clinic recipient email configured from env var"},{"ancestorTitles":["EmailService","Configuration"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"EmailService Configuration should report email as configured when env vars are set","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should report email as configured when env vars are set"},{"ancestorTitles":["EmailService","sendVerificationCode"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"EmailService sendVerificationCode should be a function","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should be a function"},{"ancestorTitles":["EmailService","sendVerificationCode"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"EmailService sendVerificationCode should return true when sending verification code","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return true when sending verification code"},{"ancestorTitles":["EmailService","sendVerificationCode"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"EmailService sendVerificationCode should log verification code in dev/test mode","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should log verification code in dev/test mode"},{"ancestorTitles":["EmailService","sendVerificationCode"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"EmailService sendVerificationCode should handle 6-digit codes correctly","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle 6-digit codes correctly"},{"ancestorTitles":["EmailService","sendSignedPdf"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"EmailService sendSignedPdf should be a function","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should be a function"},{"ancestorTitles":["EmailService","sendSignedPdf"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"EmailService sendSignedPdf should return true when sending PDF","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should return true when sending PDF"},{"ancestorTitles":["EmailService","sendSignedPdf"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"EmailService sendSignedPdf should use default recipient when toEmail is null","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should use default recipient when toEmail is null"},{"ancestorTitles":["EmailService","sendSignedPdf"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"EmailService sendSignedPdf should handle hospital_auto signature type","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle hospital_auto signature type"},{"ancestorTitles":["EmailService","sendSignedPdf"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"EmailService sendSignedPdf should handle alphatau_verified signature type","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle alphatau_verified signature type"},{"ancestorTitles":["EmailService","sendSignedPdf"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"EmailService sendSignedPdf should log signature details in dev mode","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should log signature details in dev mode"},{"ancestorTitles":["EmailService","Default Export"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"EmailService Default Export should export all functions","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"status":"passed","title":"should export all functions"},{"ancestorTitles":["User.generateVerificationCode (Fixed)","Verification Code Generation Logic"],"duration":42,"failureDetails":[],"failureMessages":[],"fullName":"User.generateVerificationCode (Fixed) Verification Code Generation Logic should generate 6-digit numeric codes","invocations":1,"location":null,"numPassingAsserts":300,"retryReasons":[],"status":"passed","title":"should generate 6-digit numeric codes"},{"ancestorTitles":["User.generateVerificationCode (Fixed)","Verification Code Generation Logic"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"User.generateVerificationCode (Fixed) Verification Code Generation Logic should NOT generate hardcoded 123456","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should NOT generate hardcoded 123456"},{"ancestorTitles":["User.generateVerificationCode (Fixed)","Verification Code Generation Logic"],"duration":2,"failureDetails":[],"failureMessages":[],"fullName":"User.generateVerificationCode (Fixed) Verification Code Generation Logic should produce unique codes (with high probability)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should produce unique codes (with high probability)"},{"ancestorTitles":["User.generateVerificationCode (Fixed)","Code Hashing"],"duration":113,"failureDetails":[],"failureMessages":[],"fullName":"User.generateVerificationCode (Fixed) Code Hashing should hash codes with bcrypt","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should hash codes with bcrypt"},{"ancestorTitles":["User.generateVerificationCode (Fixed)","Code Hashing"],"duration":274,"failureDetails":[],"failureMessages":[],"fullName":"User.generateVerificationCode (Fixed) Code Hashing should verify hashed codes correctly","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should verify hashed codes correctly"},{"ancestorTitles":["User.generateVerificationCode (Fixed)","Expiration Logic"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"User.generateVerificationCode (Fixed) Expiration Logic should set expiration 10 minutes in future","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should set expiration 10 minutes in future"},{"ancestorTitles":["Integration Considerations"],"duration":0,"failureDetails":[],"failureMessages":[],"fullName":"Integration Considerations should handle email service gracefully when not configured","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should handle email service gracefully when not configured"},{"ancestorTitles":["Integration Considerations"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"Integration Considerations should not throw when sending PDF in dev mode","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"status":"passed","title":"should not throw when sending PDF in dev mode"}],"endTime":1771345635837,"message":"","name":"/home/runner/work/ALA/ALA/backend/tests/unit/services/emailService.test.ts","startTime":1771345635032,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["finalizationHelpers","buildRemovalPdfData"],"duration":4,"failureDetails":[],"failureMessages":[],"fullName":"finalizationHelpers buildRemovalPdfData should populate applicatorGroups when applicators are provided","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"status":"passed","title":"should populate applicatorGroups when applicators are provided"},{"ancestorTitles":["finalizationHelpers","buildRemovalPdfData"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"finalizationHelpers buildRemovalPdfData should calculate totalSourcesRemoved correctly","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should calculate totalSourcesRemoved correctly"},{"ancestorTitles":["finalizationHelpers","buildRemovalPdfData"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"finalizationHelpers buildRemovalPdfData should handle mixed seed quantities correctly","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should handle mixed seed quantities correctly"},{"ancestorTitles":["finalizationHelpers","buildRemovalPdfData"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"finalizationHelpers buildRemovalPdfData should handle partial removal (not all applicators removed)","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"status":"passed","title":"should handle partial removal (not all applicators removed)"},{"ancestorTitles":["finalizationHelpers","buildRemovalPdfData"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"finalizationHelpers buildRemovalPdfData should return empty applicatorGroups when no applicators provided","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"status":"passed","title":"should return empty applicatorGroups when no applicators provided"},{"ancestorTitles":["finalizationHelpers","buildRemovalPdfData"],"duration":1,"failureDetails":[],"failureMessages":[],"fullName":"finalizationHelpers buildRemovalPdfData should include treatment information in the output","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"status":"passed","title":"should include treatment information in the output"}],"endTime":1771345635898,"message":"","name":"/home/runner/work/ALA/ALA/backend/tests/unit/utils/finalizationHelpers.test.ts","startTime":1771345635293,"status":"passed","summary":""}],"wasInterrupted":false}
